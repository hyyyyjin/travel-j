프로젝트: 여행 계획 앱 'TripFlow' 개발 명세서
문서 버전: 1.0
작성일: 2025년 9월 21일
이 문서는 Flutter 기반의 여행 계획 및 실행 앱 'TripFlow'의 개발을 위한 요구사항과 명세를 정의합니다.
실행 방법 (로컬)
1) 사전 준비
 - Flutter SDK 설치 및 `flutter doctor` 정상 여부 확인
 - Dart SDK 3.3+ (Flutter에 포함)

2) 프로젝트 생성물
 - 이 저장소의 `tripflow/` 디렉토리에 Flutter 앱 소스가 포함되어 있습니다.

3) 명령어
 - 의존성 설치: `flutter pub get`
 - (처음 1회) 플랫폼 폴더 생성: `flutter create .`
 - 실행: `flutter run`
 - 분석/포맷: `flutter analyze`, `flutter format .`

4) Ubuntu/Linux에서의 설치 가이드 (요약)
 - Flutter 설치 (snap 예시):
   - `sudo snap install flutter --classic`
   - `flutter --version`
 - Android 실행 준비:
   - Android Studio 설치 또는 SDK(Commandline) 설치
   - `flutter doctor --android-licenses` 실행 후 모든 라이선스 동의
   - 에뮬레이터 생성 또는 USB 디바이스 연결 후 `flutter devices` 확인
 - Linux 데스크탑 실행 준비(선택):
   - 필수 패키지: `sudo apt update && sudo apt install -y clang cmake ninja-build pkg-config libgtk-3-dev libayatana-appindicator3-dev`
   - 데스크탑 활성화: `flutter config --enable-linux-desktop`

5) 실행 예시
 - Android: (에뮬레이터/디바이스 연결 후)
   - `cd tripflow`
   - `flutter create . && flutter pub get`
   - `flutter run -d android`
 - Linux 데스크탑:
   - `cd tripflow`
   - `flutter create . && flutter pub get`
   - `flutter run -d linux`

참고
 - 본 레포는 플랫폼 폴더를 버전관리에서 제외합니다(`android/`, `ios/`, `linux/` 등). 처음 클론 후 1회 `flutter create .`로 자동 생성하세요.

기능 구현 상태 (MVP)
 - 홈/플랜 상세/일일 일정/일정 편집 네비게이션 구성
 - 일정 타임라인 UI, FAB로 일정 추가
 - url_launcher 기반 원클릭 길찾기 (Naver → Google 앱 → 웹 순)
 - Riverpod 상태관리 + 메모리 저장소 (추후 Firestore 대체 예정)
 - 확장 가능한 카드 구조로 네비게이션 단순화 (2025-01-21 완료)

## 개발 로드맵

### 1단계: 핵심 기능 완성 (완료)
- [x] 새 플랜 생성: `home_screen.dart`의 FAB 기능 구현
- [x] 플랜 데이터: 샘플 데이터 추가해서 테스트 가능하게 만들기
- [x] 기본 CRUD: 플랜 생성/수정/삭제 기능
- [x] 일정 CRUD: 일정 생성/수정/삭제 기능
- [x] UX 개선: 홈 화면에서 바로 수정/삭제, 일정별 삭제 버튼

### 2단계: 이동시간 API 연동
- [ ] DirectionsService: 실제 이동시간 계산 API 연동
- [ ] 네이버/구글 지도 API: 좌표 기반 이동시간 조회
- [ ] 오프라인 대응: API 실패 시 폴백 처리

### 3단계: Firestore 연동
- [ ] Firestore 연동: 메모리 저장소 → Firestore 전환
- [ ] 오프라인 동기화: 로컬 저장소 + 클라우드 동기화
- [ ] 사용자 인증: Firebase Auth 연동

### 4단계: 사용자 경험 개선
- [ ] 애니메이션: 카드 펼침/접힘 애니메이션 추가
- [ ] 로딩 상태: 데이터 로딩 중 스켈레톤 UI
- [ ] 에러 처리: 네트워크 오류, 데이터 오류 처리
목차
 * 프로젝트 개요
   * 프로젝트 목표
   * 타겟 유저
   * 핵심 차별점
 * 기술 스택 및 개발 전략
   * 기술 스택
   * 개발 로드맵
 * 기능 명세서
   * Part 1: 플랜 관리
   * Part 2: 일정 계획
   * Part 3: 계획 실행 및 기록
 * 화면 설계 (UI/UX)
   * 주요 컨셉
   * 화면별 상세 설계
1. 프로젝트 개요
1.1. 프로젝트 목표
꼼꼼하게 여행을 계획하는 '계획형 여행자'를 위한 모바일 앱. 계획 수립의 편의성을 높이고, 특히 여행 중 계획을 실행하는 과정의 번거로움(다음 장소 검색, 길찾기 등)을 최소화하며, 여행 후 추억을 자동으로 아카이빙하는 완결된 경험을 제공한다.
1.2. 타겟 유저
 * MBTI 'J' 성향의 꼼꼼한 여행자
 * 여행 전 동선과 시간을 분 단위로 계획해야 마음이 놓이는 사람
 * 그룹 여행에서 일정을 공유하고 리드하는 역할을 맡는 사람
1.3. 핵심 차별점
기존 여행 앱들이 '계획 수립'과 '정보 탐색'에 집중하는 반면, 'TripFlow'는 **'계획의 편리한 실행'**에 초점을 맞춘다. 특히 **'원클릭 길찾기'**와 **'푸시 알림'**을 통해 여행지 현장에서의 사용자 경험을 극대화하여 니치 마켓을 공략한다.
2. 기술 스택 및 개발 전략
2.1. 기술 스택
 * 프레임워크: Flutter. 1인 개발 생산성을 고려하여 단일 코드로 iOS, Android 앱 동시 개발을 목표로 한다.
 * 상태 관리: Provider, Riverpod, BLoC 등 Flutter 생태계에서 검증된 상태 관리 라이브러리 사용을 권장.
 * 데이터베이스: Firebase Firestore 또는 유사한 NoSQL 클라우드 데이터베이스 (실시간 동기화 및 웹 뷰어 연동에 용이).
 * API: 네이버 지도 API, Google Maps/Places API (장소 검색 및 길찾기 딥링크용).
2.2. 개발 로드맵
> 전략: 앱 우선 개발. 핵심 가치를 앱에서 먼저 증명하고 점진적으로 확장한다.
> 
 * 1단계 (MVP): 모바일 앱 개발에 모든 리소스를 집중한다. 이 문서에 명시된 모든 핵심 기능을 구현한다.
 * 2단계: 앱 출시 후, 공유 기능 강화를 위해 **읽기 전용 '웹 뷰어'**를 개발한다.
 * 3단계 (장기): 사용자 기반이 충분히 확보되면 PC에서 상세 계획을 원하는 사용자를 위해 편집 기능이 포함된 완전한 웹 버전을 고려한다.
3. 기능 명세서
3.1. Part 1: 플랜 관리
 * 기능 1-1: 여러 플랜 생성 및 관리: 사용자는 여러 여행 계획을 생성/수정/삭제할 수 있다.
 * 기능 1-2: 플랜 공유: 각 플랜에 대해 로그인 없이 웹 브라우저에서 볼 수 있는 읽기 전용 고유 링크를 생성한다.
 * 기능 1-3: 여행 템플릿: 관리자가 제공하는 인기 여행지 템플릿을 복사하여 계획을 시작할 수 있다.
3.2. Part 2: 일정 계획
 * 기능 2-1: 일/시간 단위 장소 입력: 날짜별 타임라인에 시간과 장소를 지정하여 일정을 추가한다.
 * 기능 2-2: 이동 시간 자동 계산: 일정 A와 B 사이에 예상 이동 시간(도보/대중교통)을 API로 조회하여 자동으로 표시한다.
 * 기능 2-3: 예산 관리: 각 일정 항목에 예상 경비를 입력하면, 일별/총계 예산을 자동 계산하여 보여준다.
 * 기능 2-4: 메모 및 체크리스트: 각 일정에 텍스트 메모나 간단한 할 일 체크리스트를 추가한다.
3.3. Part 3: 계획 실행 및 기록
 * 기능 3-1: 푸시 알림: 예정된 일정 시작 전(예: 15분 전) 사용자에게 푸시 알림을 보낸다.
 * 기능 3-2: 원클릭 길찾기 (⭐ 핵심 기능): 일정 터치 시, 현재 위치를 파악하여 국내에서는 네이버 지도, 해외에서는 구글 지도 앱으로 길찾기를 즉시 실행한다.
 * 기능 3-3: '다녀왔어요' (여행 아카이빙): 방문 완료를 체크하면, 여행 종료 후 체크된 항목들을 모아 '나의 여행 기록' 타임라인을 자동으로 생성한다.
4. 화면 설계 (UI/UX)
4.1. 주요 컨셉
 * 카드(Card) UI: 정보를 명확하게 구분하고 시각적 안정성을 제공한다.
 * 플로팅 액션 버튼 (FAB): 화면의 주요 생성(Create) 동작을 담당한다.
 * 타임라인(Timeline) 뷰: 시간의 흐름에 따른 일정 정보를 직관적으로 표현한다.
4.2. 화면별 상세 설계
1. 홈 화면 (나의 플랜 목록)
 * 목표: 모든 여행 계획을 보고, 새로운 계획을 시작하는 시작점.
 * UI 컴포넌트:
   * AppBar: 앱 타이틀.
   * ListView: 플랜 카드의 목록. 각 카드는 대표 이미지, 플랜 제목, 기간을 포함.
   * FloatingActionButton: '+' 아이콘. 새 플랜 생성 기능 호출.
 * 동작: 카드 터치 시 '플랜 상세 화면'으로 Navigator.push.
2. 플랜 상세 화면 (일자별 개요) - 확장 가능한 카드 구조
 * 목표: 특정 플랜의 전체 일정을 날짜별로 요약하여 보여준다.
 * UI 컴포넌트:
   * AppBar: 플랜 제목, 뒤로가기 버튼, 공유 IconButton.
   * ListView: 확장 가능한 일자 카드 목록
     * 각 카드: 'Day 1: 날짜', '일정 개수' 표시
     * 카드 클릭 시: 해당 날짜의 일정들이 아래로 펼쳐짐
     * 펼쳐진 상태: 일정 목록 + 이동시간 카드 + 각 일정별 길찾기/편집 버튼
     * 각 날짜별 FAB: 해당 날짜에 일정 추가
 * 동작: 카드 펼침/접힘 토글, 일정 추가/편집은 같은 화면에서 처리
 * 특징: 일정 간 이동시간 자동 표시 (향후 API 연동 예정)
3. 일일 일정 화면 (타임라인 뷰) - 선택적 사용
 * 목표: 하루의 상세 일정을 시간 순으로 보여주는 핵심 실행 화면.
 * UI 컴포넌트:
   * AppBar: 날짜, 뒤로가기 버튼.
   * ListView 또는 CustomScrollView: 타임라인 UI 구현.
     * 일정 위젯: 시간, 장소명, 예산, 메모 아이콘, '다녀왔어요' Checkbox 포함.
     * 이동 시간 위젯: 두 일정 위젯 사이에 아이콘과 텍스트로 이동 시간 표시.
   * FloatingActionButton: '+' 아이콘. '장소 추가/수정 화면' 호출.
 * 동작: 일정 위젯 터치 시 url_launcher 같은 패키지를 사용해 지도 앱 딥링크 실행.
 * 참고: 대부분의 기능은 플랜 상세 화면의 확장 가능한 카드에서 처리되며, 상세한 타임라인 뷰가 필요한 경우에만 사용.
4. 장소 추가/수정 화면
 * 목표: 타임라인에 들어갈 상세 정보를 입력하는 폼.
 * UI 컴포넌트:
   * AppBar: '일정 추가', '저장' 버튼.
   * Column 위젯 내 TextField들:
     * 장소 검색 필드 (터치 시 검색 페이지로 이동 또는 자동완성 UI 표시).
     * 시간 선택 InkWell (터치 시 showTimePicker 호출).
     * 예산, 메모 TextField.
 * 동작: '저장' 버튼 터치 시 입력된 정보로 새 일정 객체를 생성하고 이전 화면(일일 일정 화면)으로 데이터를 반환.

